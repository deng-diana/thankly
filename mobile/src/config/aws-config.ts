/**
 * AWS Cognitoé…ç½®
 *
 * è¿™ä¸ªæ–‡ä»¶å‘Šè¯‰App:
 * - Cognitoåœ¨å“ªé‡Œ(regionå’ŒuserPoolId)
 * - ç”¨å“ªä¸ªå®¢æˆ·ç«¯(userPoolWebClientId)
 * - ç™»å½•åè·³è½¬åˆ°å“ªé‡Œ(redirectSignIn)
 * - åç«¯APIåœ¨å“ªé‡Œ(API_BASE_URL)  â† æ–°å¢æ³¨é‡Š
 *
 */

// ğŸ”§ æœ¬åœ°å¼€å‘é…ç½®è¯´æ˜ï¼š
//
// ã€æ–¹æ¡ˆä¸€ï¼šç»Ÿä¸€ä½¿ç”¨å±€åŸŸç½‘IPï¼ˆæ¨èï¼‰ã€‘
// ä¼˜ç‚¹ï¼šæ¨¡æ‹Ÿå™¨å’ŒçœŸæœºéƒ½å¯ä»¥ç”¨åŒä¸€ä¸ªé…ç½®ï¼Œæ— éœ€åˆ‡æ¢
// é…ç½®ï¼šå°† LOCAL_IP æ”¹ä¸ºä½ çš„ç”µè„‘å±€åŸŸç½‘IPï¼ˆ192.168.x.xï¼‰
// ä½¿ç”¨ï¼šåç«¯å¯åŠ¨æ—¶ç›‘å¬æ‰€æœ‰æ¥å£ï¼šuvicorn app.main:app --reload --host 0.0.0.0 --port 8000
//
// ã€æ–¹æ¡ˆäºŒï¼šæ ¹æ®è®¾å¤‡ç±»å‹è‡ªåŠ¨åˆ‡æ¢ã€‘
// ä¼˜ç‚¹ï¼šæ¨¡æ‹Ÿå™¨ç”¨æœ¬åœ°åœ°å€æ›´å¿«ï¼ŒçœŸæœºç”¨å±€åŸŸç½‘IP
// ä½¿ç”¨ï¼šä»£ç å·²è‡ªåŠ¨æ£€æµ‹ï¼Œæ— éœ€æ‰‹åŠ¨åˆ‡æ¢
//
// ã€æ–¹æ¡ˆä¸‰ï¼šç”Ÿäº§ç¯å¢ƒã€‘
// å–æ¶ˆæ³¨é‡Šä¸‹é¢çš„ PRODUCTION_URLï¼Œæ³¨é‡Šæ‰ LOCAL_IP é…ç½®

// ğŸŒ ä½ çš„ç”µè„‘å±€åŸŸç½‘IPåœ°å€ï¼ˆç”¨äºçœŸæœºå’Œæ¨¡æ‹Ÿå™¨åŒæ—¶è¿æ¥ï¼‰
// è·å–æ–¹æ³•ï¼š
//   - Mac: ç³»ç»Ÿè®¾ç½® > ç½‘ç»œ > æŸ¥çœ‹IPåœ°å€ æˆ–è¿è¡Œ: ifconfig | grep "inet " | grep -v 127.0.0.1
//   - Windows: ipconfig æŸ¥çœ‹ IPv4 åœ°å€
const LOCAL_IP = "192.168.0.94"; // âš ï¸ ä¿®æ”¹ä¸ºä½ çš„ç”µè„‘IPåœ°å€

// ğŸ“± ç”Ÿäº§ç¯å¢ƒURLï¼ˆè¿æ¥ API Gatewayï¼‰
// ğŸ¯ ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼ˆ2026-01-10 é…ç½®ï¼‰
const PRODUCTION_URL = "https://api.thankly.app";

// ğŸ”„ ç¯å¢ƒåˆ‡æ¢ï¼štrue = æœ¬åœ°å¼€å‘ï¼Œfalse = ç”Ÿäº§ç¯å¢ƒ
// âš ï¸âš ï¸âš ï¸ ä¸Šçº¿å‰å¿…é¡»æ”¹ä¸º falseï¼âš ï¸âš ï¸âš ï¸
// ğŸ“¦ æ‰“åŒ…å‰æ£€æŸ¥ï¼šè¿è¡Œ npm run build å‰ï¼Œç¡®ä¿è¿™é‡Œæ”¹ä¸º false
const IS_LOCAL_DEV = false; // âœ… æœ¬åœ°å¼€å‘æ¨¡å¼ (è¿æ¥åˆ° http://192.168.0.20:8000)

// ğŸ¯ æ™ºèƒ½APIåœ°å€é…ç½®
// ç­–ç•¥ï¼š
//   1. æœ¬åœ°å¼€å‘æ¨¡å¼ï¼š
//      - çœŸæœºï¼šä½¿ç”¨å±€åŸŸç½‘IPï¼ˆ192.168.x.xï¼‰
//      - æ¨¡æ‹Ÿå™¨ï¼šä½¿ç”¨å±€åŸŸç½‘IPï¼ˆä¸çœŸæœºç»Ÿä¸€ï¼Œæ–¹ä¾¿åŒæ—¶æµ‹è¯•ï¼‰
//   2. ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨AWS Lambda URL
export const API_BASE_URL = (() => {
  if (!IS_LOCAL_DEV) {
    // ç”Ÿäº§ç¯å¢ƒ
    return PRODUCTION_URL;
  }

  // æœ¬åœ°å¼€å‘ï¼šç»Ÿä¸€ä½¿ç”¨å±€åŸŸç½‘IPï¼ˆæ¨¡æ‹Ÿå™¨å’ŒçœŸæœºéƒ½å¯ä»¥è®¿é—®ï¼‰
  // æ³¨æ„ï¼šåç«¯éœ€è¦ç›‘å¬æ‰€æœ‰æ¥å£ï¼š--host 0.0.0.0
  return `http://${LOCAL_IP}:8000`;
})();

const awsConfig = {
  // AWSåŒºåŸŸ
  region: "us-east-1",

  // Cognito User Pool ID (ä»åç«¯å¤åˆ¶)
  userPoolId: "us-east-1_1DgDNffb0",

  // App Client ID (ä»åç«¯å¤åˆ¶ - ç”¨Public Clientçš„ID)
  userPoolWebClientId: "6e521vvi1g2a1efbf3l70o83k2",

  // CognitoåŸŸå
  oauth: {
    domain: "auth.thankly.app",

    // ç™»å½•æƒé™èŒƒå›´
    scope: ["email", "openid", "profile"],

    // ç™»å½•æˆåŠŸåè·³è½¬çš„åœ°å€
    // å¼€å‘æ—¶ç”¨exp://('exp://127.0.0.1:19000/--/callback'),ç”Ÿäº§ç¯å¢ƒç”¨myapp://
    redirectSignIn: "myapp://callback",

    // ç™»å‡ºåè·³è½¬çš„åœ°å€
    redirectSignOut: "myapp://signout",

    // ä½¿ç”¨Authorization Code + PKCE (æœ€å®‰å…¨)
    responseType: "code",
  },
};

export default awsConfig;
