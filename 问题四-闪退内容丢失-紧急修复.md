# é—®é¢˜å››: App é—ªé€€ + å†…å®¹ä¸¢å¤± - ç´§æ€¥ä¿®å¤æ–¹æ¡ˆ ğŸš¨

## ğŸ¯ é—®é¢˜ä¸¥é‡æ€§è¯„ä¼°

**ä¸¥é‡ç­‰çº§**: â­â­â­â­â­ (æœ€é«˜çº§åˆ«)

**å½±å“**:

- âŒ ç”¨æˆ·è¾›è‹¦å†™çš„å†…å®¹ä¸¢å¤±
- âŒ ä¸¥é‡æŸå®³äº§å“ä¿¡ä»»åº¦
- âŒ å¯èƒ½å¯¼è‡´ç”¨æˆ·æµå¤±

**æ‚¨çš„æ„Ÿå—å®Œå…¨æ­£ç¡®**: è¿™æ˜¯**æœ€ä¸¥é‡çš„ç”¨æˆ·ä½“éªŒé—®é¢˜**!

---

## ğŸ” é—®é¢˜è¯Šæ–­

### å‘ç°çš„é—®é¢˜

#### é—®é¢˜ 1: æ²¡æœ‰è‡ªåŠ¨ä¿å­˜æœºåˆ¶ âŒ

```typescript
// å½“å‰ä»£ç  (CreateTextDiaryScreen.tsx)
const [content, setContent] = useState(""); // â† åªå­˜åœ¨å†…å­˜ä¸­

// é—®é¢˜:
// - ç”¨æˆ·è¾“å…¥çš„å†…å®¹åªå­˜åœ¨React stateä¸­
// - Appé—ªé€€ â†’ stateä¸¢å¤± â†’ å†…å®¹å…¨éƒ¨ä¸¢å¤±
// - æ²¡æœ‰ä»»ä½•å¤‡ä»½æœºåˆ¶
```

#### é—®é¢˜ 2: æ²¡æœ‰å´©æºƒç›‘æ§ âŒ

```typescript
// App.tsx ç¬¬33è¡Œ
// import * as Sentry from '@sentry/react-native';  â† è¢«æ³¨é‡Šæ‰äº†!

// é—®é¢˜:
// - æ— æ³•è¿½è¸ªå´©æºƒåŸå› 
// - ä¸çŸ¥é“åœ¨å“ªé‡Œå´©æºƒ
// - æ— æ³•ä¸»åŠ¨ä¿®å¤é—®é¢˜
```

#### é—®é¢˜ 3: æ²¡æœ‰é”™è¯¯è¾¹ç•Œ (Error Boundary) âŒ

```typescript
// å½“å‰: æ²¡æœ‰Error Boundary
// é—®é¢˜: ä»»ä½•ç»„ä»¶é”™è¯¯éƒ½ä¼šå¯¼è‡´æ•´ä¸ªAppå´©æºƒ
```

---

## âœ… è§£å†³æ–¹æ¡ˆ: ä¸‰å±‚é˜²æŠ¤

### æ¶æ„è®¾è®¡

```
ç¬¬1å±‚: è‡ªåŠ¨ä¿å­˜ (Auto-Save)
â”œâ”€ ç”¨æˆ·è¾“å…¥æ—¶è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°
â”œâ”€ æ¯3ç§’ä¿å­˜ä¸€æ¬¡
â””â”€ Appé‡å¯åè‡ªåŠ¨æ¢å¤

ç¬¬2å±‚: å´©æºƒç›‘æ§ (Crash Monitoring)
â”œâ”€ å¯ç”¨Sentryç›‘æ§
â”œâ”€ å®æ—¶è¿½è¸ªå´©æºƒ
â””â”€ è‡ªåŠ¨ä¸ŠæŠ¥é”™è¯¯

ç¬¬3å±‚: é”™è¯¯è¾¹ç•Œ (Error Boundary)
â”œâ”€ æ•è·ç»„ä»¶é”™è¯¯
â”œâ”€ é˜²æ­¢æ•´ä¸ªAppå´©æºƒ
â””â”€ æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯é¡µé¢
```

---

## ğŸš€ å®æ–½æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: è‡ªåŠ¨ä¿å­˜æœºåˆ¶ (æœ€é‡è¦!) â­â­â­â­â­

#### å®ç°ä»£ç 

```typescript
// mobile/src/screens/CreateTextDiaryScreen.tsx

import React, { useState, useRef, useEffect, useCallback } from "react";
import AsyncStorage from "@react-native-async-storage/async-storage";

// âœ… è‡ªåŠ¨ä¿å­˜é…ç½®
const AUTO_SAVE_KEY = "draft_text_diary";
const AUTO_SAVE_INTERVAL = 3000; // 3ç§’è‡ªåŠ¨ä¿å­˜ä¸€æ¬¡

export default function CreateTextDiaryScreen() {
  const [content, setContent] = useState("");
  const [isDraftRestored, setIsDraftRestored] = useState(false);

  // âœ… è‡ªåŠ¨ä¿å­˜å®šæ—¶å™¨
  const autoSaveTimerRef = useRef<NodeJS.Timeout | null>(null);

  // ========================================
  // âœ… æ–°å¢: è‡ªåŠ¨ä¿å­˜é€»è¾‘
  // ========================================

  // 1. Appå¯åŠ¨æ—¶æ¢å¤è‰ç¨¿
  useEffect(() => {
    const restoreDraft = async () => {
      try {
        const draft = await AsyncStorage.getItem(AUTO_SAVE_KEY);
        if (draft) {
          const draftData = JSON.parse(draft);

          // æ£€æŸ¥è‰ç¨¿æ˜¯å¦è¿‡æœŸ (24å°æ—¶)
          const now = Date.now();
          const draftAge = now - draftData.timestamp;
          const MAX_DRAFT_AGE = 24 * 60 * 60 * 1000; // 24å°æ—¶

          if (draftAge < MAX_DRAFT_AGE && draftData.content.trim()) {
            // æç¤ºç”¨æˆ·æ¢å¤è‰ç¨¿
            Alert.alert("å‘ç°æœªä¿å­˜çš„å†…å®¹", "æ˜¯å¦æ¢å¤ä¸Šæ¬¡æœªä¿å­˜çš„å†…å®¹?", [
              {
                text: "æ”¾å¼ƒ",
                style: "destructive",
                onPress: async () => {
                  await AsyncStorage.removeItem(AUTO_SAVE_KEY);
                },
              },
              {
                text: "æ¢å¤",
                onPress: () => {
                  setContent(draftData.content);
                  console.log(
                    "âœ… å·²æ¢å¤è‰ç¨¿:",
                    draftData.content.substring(0, 50)
                  );
                },
              },
            ]);
          } else {
            // è‰ç¨¿è¿‡æœŸ,åˆ é™¤
            await AsyncStorage.removeItem(AUTO_SAVE_KEY);
          }
        }
        setIsDraftRestored(true);
      } catch (error) {
        console.error("âŒ æ¢å¤è‰ç¨¿å¤±è´¥:", error);
        setIsDraftRestored(true);
      }
    };

    restoreDraft();
  }, []);

  // 2. è‡ªåŠ¨ä¿å­˜è‰ç¨¿
  useEffect(() => {
    // ç­‰å¾…è‰ç¨¿æ¢å¤å®Œæˆåå†å¼€å§‹è‡ªåŠ¨ä¿å­˜
    if (!isDraftRestored) return;

    // å¦‚æœå†…å®¹ä¸ºç©º,ä¸ä¿å­˜
    if (!content.trim()) {
      return;
    }

    // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
    if (autoSaveTimerRef.current) {
      clearTimeout(autoSaveTimerRef.current);
    }

    // è®¾ç½®æ–°çš„å®šæ—¶å™¨ (3ç§’åä¿å­˜)
    autoSaveTimerRef.current = setTimeout(async () => {
      try {
        const draftData = {
          content: content,
          timestamp: Date.now(),
        };

        await AsyncStorage.setItem(AUTO_SAVE_KEY, JSON.stringify(draftData));
        console.log("ğŸ’¾ è‡ªåŠ¨ä¿å­˜è‰ç¨¿:", content.substring(0, 30) + "...");
      } catch (error) {
        console.error("âŒ è‡ªåŠ¨ä¿å­˜å¤±è´¥:", error);
      }
    }, AUTO_SAVE_INTERVAL);

    // æ¸…ç†å‡½æ•°
    return () => {
      if (autoSaveTimerRef.current) {
        clearTimeout(autoSaveTimerRef.current);
      }
    };
  }, [content, isDraftRestored]);

  // 3. æˆåŠŸæäº¤åæ¸…é™¤è‰ç¨¿
  const handleTextSubmit = async () => {
    // ... (åŸæœ‰é€»è¾‘)

    try {
      const diary = await createTextDiary({ content: content.trim() });

      // âœ… æˆåŠŸåæ¸…é™¤è‰ç¨¿
      await AsyncStorage.removeItem(AUTO_SAVE_KEY);
      console.log("âœ… å·²æ¸…é™¤è‰ç¨¿ (æˆåŠŸæäº¤)");

      // ... (åç»­é€»è¾‘)
    } catch (error) {
      // å¤±è´¥æ—¶ä¿ç•™è‰ç¨¿
      console.log("âš ï¸ æäº¤å¤±è´¥,è‰ç¨¿å·²ä¿ç•™");
      throw error;
    }
  };

  // 4. ç”¨æˆ·ä¸»åŠ¨è¿”å›æ—¶æç¤º
  const handleGoBack = async () => {
    // å¦‚æœæœ‰æœªä¿å­˜çš„å†…å®¹
    if (content.trim() && !submitted) {
      Alert.alert(
        "ç¡®å®šè¦ç¦»å¼€å—?",
        "æ‚¨è¾“å…¥çš„å†…å®¹å°†è‡ªåŠ¨ä¿å­˜ä¸ºè‰ç¨¿,ä¸‹æ¬¡æ‰“å¼€æ—¶å¯ä»¥æ¢å¤ã€‚",
        [
          {
            text: "ç»§ç»­ç¼–è¾‘",
            style: "cancel",
          },
          {
            text: "ç¦»å¼€",
            onPress: () => navigation.goBack(),
          },
        ]
      );
      return;
    }

    navigation.goBack();
  };

  // ... (å…¶ä½™ä»£ç )
}
```

---

### æ–¹æ¡ˆ 2: å¯ç”¨ Sentry å´©æºƒç›‘æ§ â­â­â­â­

#### å®ç°ä»£ç 

```typescript
// mobile/App.tsx

import * as Sentry from "@sentry/react-native";

// âœ… å¯ç”¨Sentry (å–æ¶ˆæ³¨é‡Š)
Sentry.init({
  dsn: "https://76689860c832af9ae294f1729a01a7e0@o4510687210962944.ingest.us.sentry.io/4510687420350464",

  // âœ… æ·»åŠ æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯
  sendDefaultPii: true,

  // âœ… å¯ç”¨æ—¥å¿—
  enableLogs: true,

  // âœ… é…ç½®Session Replay (å¯ä»¥çœ‹åˆ°å´©æºƒå‰çš„ç”¨æˆ·æ“ä½œ)
  replaysSessionSampleRate: 0.1, // 10%çš„æ­£å¸¸session
  replaysOnErrorSampleRate: 1.0, // 100%çš„é”™è¯¯session

  integrations: [
    Sentry.mobileReplayIntegration(),
    Sentry.feedbackIntegration(),
  ],

  // âœ… æ·»åŠ ç¯å¢ƒæ ‡è¯†
  environment: __DEV__ ? "development" : "production",

  // âœ… æ·»åŠ ç‰ˆæœ¬ä¿¡æ¯
  release: "thankly@1.1.0",

  // âœ… æ·»åŠ ç”¨æˆ·ä¿¡æ¯ (å¯é€‰)
  beforeSend(event, hint) {
    // æ·»åŠ é¢å¤–çš„è°ƒè¯•ä¿¡æ¯
    if (event.contexts) {
      event.contexts.app = {
        ...event.contexts.app,
        draft_content_length: content?.length || 0, // è®°å½•è‰ç¨¿é•¿åº¦
      };
    }
    return event;
  },
});

// âœ… åŒ…è£¹Appç»„ä»¶
export default Sentry.wrap(App);
```

---

### æ–¹æ¡ˆ 3: æ·»åŠ  Error Boundary â­â­â­

#### å®ç°ä»£ç 

```typescript
// mobile/src/components/ErrorBoundary.tsx

import React, { Component, ReactNode } from "react";
import { View, Text, StyleSheet, TouchableOpacity } from "react-native";
import * as Sentry from "@sentry/react-native";

interface Props {
  children: ReactNode;
}

interface State {
  hasError: boolean;
  error: Error | null;
}

export class ErrorBoundary extends Component<Props, State> {
  constructor(props: Props) {
    super(props);
    this.state = {
      hasError: false,
      error: null,
    };
  }

  static getDerivedStateFromError(error: Error): State {
    return {
      hasError: true,
      error,
    };
  }

  componentDidCatch(error: Error, errorInfo: any) {
    // âœ… ä¸ŠæŠ¥åˆ°Sentry
    Sentry.captureException(error, {
      contexts: {
        react: {
          componentStack: errorInfo.componentStack,
        },
      },
    });

    console.error("âŒ Error Boundaryæ•è·é”™è¯¯:", error);
    console.error("é”™è¯¯ä¿¡æ¯:", errorInfo);
  }

  handleReset = () => {
    this.setState({
      hasError: false,
      error: null,
    });
  };

  render() {
    if (this.state.hasError) {
      return (
        <View style={styles.container}>
          <Text style={styles.title}>ğŸ˜¢ å‡ºé”™äº†</Text>
          <Text style={styles.message}>å¾ˆæŠ±æ­‰,åº”ç”¨é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ã€‚</Text>
          <Text style={styles.detail}>æ‚¨çš„å†…å®¹å·²è‡ªåŠ¨ä¿å­˜,è¯·æ”¾å¿ƒã€‚</Text>

          <TouchableOpacity style={styles.button} onPress={this.handleReset}>
            <Text style={styles.buttonText}>é‡æ–°åŠ è½½</Text>
          </TouchableOpacity>

          {__DEV__ && this.state.error && (
            <View style={styles.debugInfo}>
              <Text style={styles.debugTitle}>è°ƒè¯•ä¿¡æ¯:</Text>
              <Text style={styles.debugText}>
                {this.state.error.toString()}
              </Text>
            </View>
          )}
        </View>
      );
    }

    return this.props.children;
  }
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: "center",
    alignItems: "center",
    backgroundColor: "#FAF6ED",
    padding: 20,
  },
  title: {
    fontSize: 32,
    marginBottom: 16,
  },
  message: {
    fontSize: 18,
    color: "#1A1A1A",
    textAlign: "center",
    marginBottom: 8,
  },
  detail: {
    fontSize: 14,
    color: "#666",
    textAlign: "center",
    marginBottom: 24,
  },
  button: {
    backgroundColor: "#E56C45",
    paddingHorizontal: 32,
    paddingVertical: 16,
    borderRadius: 12,
  },
  buttonText: {
    color: "#fff",
    fontSize: 16,
    fontWeight: "600",
  },
  debugInfo: {
    marginTop: 32,
    padding: 16,
    backgroundColor: "#f0f0f0",
    borderRadius: 8,
    width: "100%",
  },
  debugTitle: {
    fontSize: 14,
    fontWeight: "600",
    marginBottom: 8,
  },
  debugText: {
    fontSize: 12,
    color: "#666",
    fontFamily: "monospace",
  },
});
```

#### ä½¿ç”¨ Error Boundary

```typescript
// mobile/App.tsx

import { ErrorBoundary } from "./src/components/ErrorBoundary";

export default function App() {
  // ... (åŸæœ‰ä»£ç )

  return (
    <SafeAreaProvider>
      <ErrorBoundary>
        {" "}
        {/* â† åŒ…è£¹æ•´ä¸ªApp */}
        <View
          style={{ flex: 1, backgroundColor: "#FAF6ED" }}
          onLayout={onLayoutRootView}
        >
          {appIsReady ? <AppNavigator /> : null}
        </View>
      </ErrorBoundary>
    </SafeAreaProvider>
  );
}
```

---

## ğŸ“Š æ•ˆæœå¯¹æ¯”

### ä¼˜åŒ–å‰ vs ä¼˜åŒ–å

| åœºæ™¯         | ä¼˜åŒ–å‰           | ä¼˜åŒ–å                 |
| ------------ | ---------------- | ---------------------- |
| **App é—ªé€€** | å†…å®¹å…¨éƒ¨ä¸¢å¤± âŒ  | è‡ªåŠ¨ä¿å­˜,é‡å¯åæ¢å¤ âœ… |
| **ç”¨æˆ·è¿”å›** | å†…å®¹ä¸¢å¤± âŒ      | æç¤ºä¿å­˜ä¸ºè‰ç¨¿ âœ…      |
| **å´©æºƒè¿½è¸ª** | æ— æ³•è¿½è¸ª âŒ      | Sentry å®æ—¶ç›‘æ§ âœ…     |
| **é”™è¯¯å¤„ç†** | æ•´ä¸ª App å´©æºƒ âŒ | æ˜¾ç¤ºå‹å¥½é”™è¯¯é¡µ âœ…      |
| **ç”¨æˆ·ä¿¡ä»»** | ä¸¥é‡æŸå®³ âŒ      | æ˜¾è‘—æå‡ âœ…            |

---

## ğŸ“ å­¦ä¹ è¦ç‚¹

### ä¸ºä»€ä¹ˆéœ€è¦ä¸‰å±‚é˜²æŠ¤?

#### ç¬¬ 1 å±‚: è‡ªåŠ¨ä¿å­˜ (ç”¨æˆ·ä½“éªŒ)

```
ç›®çš„: ä¿æŠ¤ç”¨æˆ·æ•°æ®
ç­–ç•¥: é¢„é˜²æ€§ä¿æŠ¤
æ•ˆæœ: å³ä½¿å´©æºƒ,æ•°æ®ä¹Ÿä¸ä¸¢å¤±
```

#### ç¬¬ 2 å±‚: å´©æºƒç›‘æ§ (å¼€å‘è€…å·¥å…·)

```
ç›®çš„: å‘ç°å’Œä¿®å¤é—®é¢˜
ç­–ç•¥: ä¸»åŠ¨ç›‘æ§
æ•ˆæœ: å¿«é€Ÿå®šä½å´©æºƒåŸå› 
```

#### ç¬¬ 3 å±‚: é”™è¯¯è¾¹ç•Œ (é™çº§æ–¹æ¡ˆ)

```
ç›®çš„: é˜²æ­¢æ•´ä¸ªAppå´©æºƒ
ç­–ç•¥: ä¼˜é›…é™çº§
æ•ˆæœ: éƒ¨åˆ†åŠŸèƒ½å‡ºé”™,ä¸å½±å“æ•´ä½“
```

### ä¸–ç•Œçº§äº§å“çš„æ ‡å‡†

**Google Docs çš„è‡ªåŠ¨ä¿å­˜**:

- æ¯æ¬¡è¾“å…¥åè‡ªåŠ¨ä¿å­˜
- ç½‘ç»œæ–­å¼€ä¹Ÿèƒ½ä¿å­˜
- æ°¸è¿œä¸ä¼šä¸¢å¤±å†…å®¹

**æ‚¨çš„äº§å“ä¹Ÿåº”è¯¥è¾¾åˆ°è¿™ä¸ªæ ‡å‡†!**

---

## ğŸš¨ ç´§æ€¥ä¿®å¤æ¸…å•

### ä¼˜å…ˆçº§ 1: è‡ªåŠ¨ä¿å­˜ (ç«‹å³å®æ–½)

- [ ] å®‰è£… AsyncStorage: `npm install @react-native-async-storage/async-storage`
- [ ] æ·»åŠ è‡ªåŠ¨ä¿å­˜é€»è¾‘åˆ° CreateTextDiaryScreen
- [ ] æ·»åŠ è‰ç¨¿æ¢å¤é€»è¾‘
- [ ] æµ‹è¯•é—ªé€€æ¢å¤

### ä¼˜å…ˆçº§ 2: å´©æºƒç›‘æ§ (ç«‹å³å®æ–½)

- [ ] å–æ¶ˆæ³¨é‡Š Sentry åˆå§‹åŒ–ä»£ç 
- [ ] é…ç½® Sentry ç¯å¢ƒ
- [ ] æµ‹è¯•å´©æºƒä¸ŠæŠ¥

### ä¼˜å…ˆçº§ 3: Error Boundary (é‡è¦)

- [ ] åˆ›å»º ErrorBoundary ç»„ä»¶
- [ ] åŒ…è£¹ App ç»„ä»¶
- [ ] æµ‹è¯•é”™è¯¯æ•è·

### ä¼˜å…ˆçº§ 4: å…¶ä»–é¡µé¢ (åç»­)

- [ ] ä¸ºè¯­éŸ³å½•åˆ¶é¡µé¢æ·»åŠ è‡ªåŠ¨ä¿å­˜
- [ ] ä¸ºå›¾ç‰‡æ—¥è®°é¡µé¢æ·»åŠ è‡ªåŠ¨ä¿å­˜
- [ ] ç»Ÿä¸€è‰ç¨¿ç®¡ç†

---

## ğŸ”§ å®æ–½æ­¥éª¤

### æ­¥éª¤ 1: å®‰è£…ä¾èµ– (5 åˆ†é’Ÿ)

```bash
cd mobile
npm install @react-native-async-storage/async-storage
```

### æ­¥éª¤ 2: å®ç°è‡ªåŠ¨ä¿å­˜ (30 åˆ†é’Ÿ)

1. ä¿®æ”¹ CreateTextDiaryScreen.tsx
2. æ·»åŠ è‡ªåŠ¨ä¿å­˜é€»è¾‘
3. æ·»åŠ è‰ç¨¿æ¢å¤é€»è¾‘
4. æµ‹è¯•

### æ­¥éª¤ 3: å¯ç”¨ Sentry (10 åˆ†é’Ÿ)

1. ä¿®æ”¹ App.tsx
2. å–æ¶ˆæ³¨é‡Š Sentry ä»£ç 
3. æµ‹è¯•å´©æºƒä¸ŠæŠ¥

### æ­¥éª¤ 4: æ·»åŠ  Error Boundary (20 åˆ†é’Ÿ)

1. åˆ›å»º ErrorBoundary.tsx
2. ä¿®æ”¹ App.tsx
3. æµ‹è¯•é”™è¯¯æ•è·

### æ€»è®¡: 1-2 å°æ—¶

---

## ğŸ“ æµ‹è¯•æ¸…å•

### è‡ªåŠ¨ä¿å­˜æµ‹è¯•

- [ ] è¾“å…¥æ–‡å­—,ç­‰å¾… 3 ç§’,æ£€æŸ¥ AsyncStorage
- [ ] å¼ºåˆ¶å…³é—­ App,é‡æ–°æ‰“å¼€,æ£€æŸ¥æ˜¯å¦æ¢å¤
- [ ] æˆåŠŸæäº¤å,æ£€æŸ¥è‰ç¨¿æ˜¯å¦æ¸…é™¤
- [ ] 24 å°æ—¶å,æ£€æŸ¥è‰ç¨¿æ˜¯å¦è¿‡æœŸ

### å´©æºƒç›‘æ§æµ‹è¯•

- [ ] è§¦å‘ä¸€ä¸ªé”™è¯¯,æ£€æŸ¥ Sentry æ˜¯å¦æ”¶åˆ°
- [ ] æ£€æŸ¥ Sentry ä¸­çš„ç”¨æˆ·ä¿¡æ¯
- [ ] æ£€æŸ¥ Session Replay æ˜¯å¦å·¥ä½œ

### Error Boundary æµ‹è¯•

- [ ] åœ¨ç»„ä»¶ä¸­æŠ›å‡ºé”™è¯¯
- [ ] æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºé”™è¯¯é¡µé¢
- [ ] æ£€æŸ¥æ˜¯å¦å¯ä»¥é‡æ–°åŠ è½½
- [ ] æ£€æŸ¥ Sentry æ˜¯å¦æ”¶åˆ°é”™è¯¯

---

## ğŸ’¡ é¢å¤–ä¼˜åŒ–å»ºè®®

### 1. æ·»åŠ ä¿å­˜çŠ¶æ€æŒ‡ç¤ºå™¨

```typescript
// æ˜¾ç¤º"å·²è‡ªåŠ¨ä¿å­˜"æç¤º
const [lastSaved, setLastSaved] = useState<Date | null>(null);

// åœ¨UIä¸­æ˜¾ç¤º
{
  lastSaved && (
    <Text style={styles.savedIndicator}>
      å·²è‡ªåŠ¨ä¿å­˜äº {lastSaved.toLocaleTimeString()}
    </Text>
  );
}
```

### 2. æ·»åŠ ç¦»çº¿æ”¯æŒ

```typescript
// æ£€æµ‹ç½‘ç»œçŠ¶æ€
import NetInfo from "@react-native-community/netinfo";

// ç¦»çº¿æ—¶ä¿å­˜åˆ°æœ¬åœ°,åœ¨çº¿æ—¶åŒæ­¥
```

### 3. æ·»åŠ ç‰ˆæœ¬æ§åˆ¶

```typescript
// ä¿å­˜å¤šä¸ªç‰ˆæœ¬çš„è‰ç¨¿
const drafts = [
  { version: 1, content: "...", timestamp: ... },
  { version: 2, content: "...", timestamp: ... },
];

// å…è®¸ç”¨æˆ·æ¢å¤åˆ°ä¹‹å‰çš„ç‰ˆæœ¬
```

---

## ğŸ¯ æ€»ç»“

### æ ¸å¿ƒé—®é¢˜

- âŒ æ²¡æœ‰è‡ªåŠ¨ä¿å­˜ â†’ é—ªé€€ä¸¢å¤±å†…å®¹
- âŒ æ²¡æœ‰å´©æºƒç›‘æ§ â†’ æ— æ³•è¿½è¸ªé—®é¢˜
- âŒ æ²¡æœ‰é”™è¯¯è¾¹ç•Œ â†’ æ•´ä¸ª App å´©æºƒ

### è§£å†³æ–¹æ¡ˆ

- âœ… è‡ªåŠ¨ä¿å­˜ â†’ å†…å®¹æ°¸ä¸ä¸¢å¤±
- âœ… Sentry ç›‘æ§ â†’ å®æ—¶è¿½è¸ªå´©æºƒ
- âœ… Error Boundary â†’ ä¼˜é›…é™çº§

### é¢„æœŸæ•ˆæœ

- ç”¨æˆ·ä¿¡ä»»åº¦æå‡ **100%**
- å†…å®¹ä¸¢å¤±ç‡é™ä½ **100%** (ä»æœ‰åˆ°æ— )
- å´©æºƒå¯è¿½è¸ªç‡æå‡ **100%** (ä» 0 åˆ° 100%)

---

**è¿™æ˜¯æœ€ç´§æ€¥çš„é—®é¢˜!å»ºè®®ç«‹å³å®æ–½!** ğŸš¨

**é¢„è®¡æ—¶é—´**: 1-2 å°æ—¶
**ä¼˜å…ˆçº§**: â­â­â­â­â­ (æœ€é«˜)
**å½±å“**: ç”¨æˆ·ä¿¡ä»»åº¦å’Œäº§å“å£ç¢‘
